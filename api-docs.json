{"openapi":"3.1.0","info":{"title":"Product-manager API","description":"API для управления товарами с синхронизацией из внешнего сервиса","version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/products":{"get":{"tags":["product-controller"],"summary":"Получение списка товаров","description":"С поддержкой пагинации.","operationId":"getAllProducts","parameters":[{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Список товаров получен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page"}}}}}},"post":{"tags":["product-controller"],"summary":"Создание нового товара","description":"Возвращает созданный товар с ID и заголовком Location.","operationId":"createProduct","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductDto"}}},"required":true},"responses":{"201":{"description":"Товар создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseProductDto"}}}},"400":{"description":"Невалидные данные товара","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseProductDto"}}}}}}},"/api/products/import":{"post":{"tags":["product-controller"],"summary":"Импорт товаров из внешнего API","description":"Импорт товаров из внешнего API (fakestoreapi.com) с сохранением в БД.","operationId":"importProducts","responses":{"200":{"description":"Импорт выполнен","content":{"text/plain":{}}},"500":{"description":"Ошибка при импорте товаров","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/register":{"post":{"tags":["auth-controller"],"summary":"Регистрация нового пользователя","operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegistrationRequestDto"}}},"required":true},"responses":{"201":{"description":"Пользователь создан","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"409":{"description":"Пользователь уже существует","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/products/{productId}":{"delete":{"tags":["product-controller"],"summary":"Удаление товара","description":"По указанному ID.","operationId":"deleteProduct","parameters":[{"name":"productId","in":"path","description":"ID товара для удаления","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"Товар удален"},"404":{"description":"Товар не найден"}}},"patch":{"tags":["product-controller"],"summary":"Обновление товара","description":"Обновляются только указанные поля. Необходимо передать хотя бы одно поле","operationId":"updateProduct","parameters":[{"name":"productId","in":"path","description":"ID товара для обновления","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"}}},"required":true},"responses":{"200":{"description":"Товар обновлен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseProductDto"}}}},"400":{"description":"Невалидные данные для обновления","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseProductDto"}}}},"404":{"description":"Товар не найден","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseProductDto"}}}}}}},"/api/products/{id}":{"get":{"tags":["product-controller"],"summary":"Получение товара по ID","operationId":"getProduct","parameters":[{"name":"id","in":"path","description":"ID товара","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Товар найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseProductDto"}}}},"404":{"description":"Товар не найден","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseProductDto"}}}}}}},"/api/products/filter/price":{"get":{"tags":["product-controller"],"summary":"Фильтрация товаров по цене","description":"Возвращает товары в указанном диапазоне цен, с поддержкой пагинации.","operationId":"getProductsByPriceRange","parameters":[{"name":"minPrice","in":"query","description":"Минимальная цена","required":true,"schema":{"type":"number"},"example":10.0},{"name":"maxPrice","in":"query","description":"Максимальная цена","required":true,"schema":{"type":"number"},"example":100.0},{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Товары отфильтрованы по цене","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page"}}}}}}},"/api/products/complex-sort":{"get":{"tags":["product-controller"],"summary":"Получение товаров с сортировкой по цене и названию категории","description":"Возвращает товары с возможностью сортировки товаров сразу по двум полям (цена и название категории). С\n указанием отдельного направления для каждого из этих полей (возрастание/убывание). Можно сортировать как отдельно по каждому из этих полей, так и сразу по обоим полям","operationId":"getAllProductsWithAdvancedSorting","parameters":[{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10},{"name":"priceSort","in":"query","description":"Направление сортировки по цене (asc/desc)","required":false,"schema":{"type":"string"},"example":"asc"},{"name":"categorySort","in":"query","description":"Направление сортировки по категории (asc/desc)","required":false,"schema":{"type":"string"},"example":"asc"}],"responses":{"200":{"description":"Товары получены","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseProductDto"}}}}}}},"/api/products/category/title/{categoryTitle}":{"get":{"tags":["product-controller"],"summary":"Получение товаров по категории","description":"Возвращает товары по названию категории, с поддержкой пагинации","operationId":"getProductsByCategoryTitle","parameters":[{"name":"categoryTitle","in":"path","description":"Название категории","required":true,"schema":{"type":"string"},"example":"Хлебобулочные изделия"},{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Товары категории получены","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseProductDto"}}}},"404":{"description":"Категория не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseProductDto"}}}}}}},"/api/products/category/title/{categoryId}":{"get":{"tags":["product-controller"],"summary":"Получение товаров по категории","description":"Возвращает товары по ID категории, с поддержкой пагинации","operationId":"getProductsByCategoryId","parameters":[{"name":"categoryId","in":"path","description":"ID категории","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Товары категории получены","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseProductDto"}}}},"404":{"description":"Категория не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResponseProductDto"}}}}}}},"/api/categories":{"get":{"tags":["category-controller"],"operationId":"getAllCategories","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ResponseCategoryDto"}}}}}}}}},"components":{"schemas":{"ProductDto":{"type":"object","description":"DTO для создания товара","properties":{"title":{"type":"string","description":"Название товара","example":"Хлеб пшеничноржаной","maxLength":50,"minLength":0},"price":{"type":"number","description":"Цена товара","example":50.5},"description":{"type":"string","description":"Описание товара","example":"Хлеб 400 грамм, из ржаной муки","maxLength":255,"minLength":0},"category":{"type":"string","description":"Название категории товара","example":"Хлебобулочные изделия","maxLength":50,"minLength":0},"rating":{"$ref":"#/components/schemas/RatingDto","description":"Рейтинг товара"}},"required":["category","description","price","rating","title"]},"RatingDto":{"type":"object","description":"DTO для рейтинга товара","properties":{"rate":{"type":"number","format":"double","description":"Средняя оценка товара","example":7.8,"maximum":10.0,"minimum":0.0},"count":{"type":"integer","format":"int32","description":"Количество оценок","example":120,"minimum":0}},"required":["count","rate"]},"ResponseProductDto":{"type":"object","description":"DTO для товара в ответ на создание или обновление","properties":{"title":{"type":"string","description":"Название товара","example":"Хлеб пшеничноржаной","maxLength":50,"minLength":0},"price":{"type":"number","description":"Цена товара","example":50.5},"description":{"type":"string","description":"Описание товара","example":"Хлеб 400 грамм, из ржаной муки","maxLength":255,"minLength":0},"category":{"type":"string","description":"Название категории товара","example":"Хлебобулочные изделия","maxLength":50,"minLength":0},"rating":{"$ref":"#/components/schemas/RatingDto","description":"Рейтинг товара"},"id":{"type":"integer","format":"int64","description":"Идентификатор товара в локальной системе","example":1},"externalId":{"type":"integer","format":"int64","description":"Идентификатор товара во внешней системе","example":1}},"required":["category","description","id","price","rating","title"]},"RegistrationRequestDto":{"type":"object","description":"DTO для регистрации клиента API","properties":{"username":{"type":"string","description":"Обязательное не пустое имя пользователя","maxLength":50,"minLength":3},"password":{"type":"string","description":"Обязательный не пустой пароль для пользователя","maxLength":2147483647,"minLength":6},"roles":{"type":"array","items":{"type":"string","enum":["ROLE_USER","ROLE_ADMIN"]},"uniqueItems":true}},"required":["password","username"]},"GrantedAuthority":{"type":"object","properties":{"authority":{"type":"string"}}},"User":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"clientName":{"type":"string"},"clientPassword":{"type":"string"},"roles":{"type":"array","items":{"type":"string","enum":["ROLE_USER","ROLE_ADMIN"]},"uniqueItems":true},"enabled":{"type":"boolean"},"password":{"type":"string"},"username":{"type":"string"},"accountNonExpired":{"type":"boolean"},"credentialsNonExpired":{"type":"boolean"},"authorities":{"type":"array","items":{"$ref":"#/components/schemas/GrantedAuthority"}},"accountNonLocked":{"type":"boolean"}}},"UpdateProductDto":{"type":"object","description":"DTO для обновления товара","properties":{"title":{"type":"string","description":"Название товара","example":"Хлеб пшеничный","maxLength":50,"minLength":0},"price":{"type":"number","description":"Цена товара","example":99.99},"description":{"type":"string","description":"Описание товара","example":"Хлеб 300 грамм, из пшеничной муки","maxLength":255,"minLength":0},"categoryId":{"type":"integer","format":"int64","description":"ID категории товара","example":2},"rating":{"$ref":"#/components/schemas/UpdateRatingDto","description":"Рейтинг товара"}}},"UpdateRatingDto":{"type":"object","description":"DTO для обновления рейтинга товара","properties":{"rate":{"type":"number","format":"double","description":"Средняя оценка товара","example":4.2,"maximum":10.0,"minimum":0.0},"count":{"type":"integer","format":"int32","description":"Количество оценок","example":150,"minimum":0}}},"Page":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"first":{"type":"boolean"},"last":{"type":"boolean"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"unpaged":{"type":"boolean"}}},"SortObject":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"PageResponseProductDto":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"first":{"type":"boolean"},"last":{"type":"boolean"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/ResponseProductDto"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"ResponseCategoryDto":{"type":"object","description":"DTO для категории товара","properties":{"id":{"type":"integer","format":"int64","description":"Идентификатор категории","example":1},"title":{"type":"string","description":"Название категории","example":"Хлебобулочные изделия"}}}}}}